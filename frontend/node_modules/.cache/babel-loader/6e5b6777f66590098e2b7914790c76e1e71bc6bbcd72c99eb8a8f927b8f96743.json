{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\OneDrive\\\\Documents\\\\GitHub\\\\ExamiVana\\\\frontend\\\\src\\\\components\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Card, Form, Button, ListGroup } from 'react-bootstrap';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:5000');\nfunction Chat({\n  receiverId,\n  examId\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState('');\n  const token = localStorage.getItem('token');\n  useEffect(() => {\n    axios.get(`http://localhost:5000/api/chats/${receiverId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => setMessages(res.data)).catch(err => console.error(err));\n    socket.on('receiveMessage', data => {\n      if (data.receiverId === receiverId) setMessages(prev => [...prev, data]);\n    });\n  }, [receiverId, token]);\n  const sendMessage = () => {\n    const data = {\n      receiverId,\n      message\n    };\n    axios.post('http://localhost:5000/api/chats', data, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(() => {\n      socket.emit('sendMessage', data);\n      setMessage('');\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: \"mt-3\",\n    children: /*#__PURE__*/_jsxDEV(Card.Body, {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: [\"Chat with \", receiverId ? 'Teacher' : 'Student']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n        variant: \"flush\",\n        children: messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n          children: msg.message\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        className: \"mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          placeholder: \"Type a message...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: sendMessage,\n          className: \"mt-2\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"9iyGj6dRHK6V1mxAAjlNUec9m4A=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","Card","Form","Button","ListGroup","io","axios","jsxDEV","_jsxDEV","socket","Chat","receiverId","examId","_s","messages","setMessages","message","setMessage","token","localStorage","getItem","get","headers","Authorization","then","res","data","catch","err","console","error","on","prev","sendMessage","post","emit","className","children","Body","fileName","_jsxFileName","lineNumber","columnNumber","variant","map","msg","idx","Item","Control","type","value","onChange","e","target","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/hp/OneDrive/Documents/GitHub/ExamiVana/frontend/src/components/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Card, Form, Button, ListGroup } from 'react-bootstrap';\r\nimport io from 'socket.io-client';\r\nimport axios from 'axios';\r\n\r\nconst socket = io('http://localhost:5000');\r\n\r\nfunction Chat({ receiverId, examId }) {\r\n  const [messages, setMessages] = useState([]);\r\n  const [message, setMessage] = useState('');\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    axios.get(`http://localhost:5000/api/chats/${receiverId}`, { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(res => setMessages(res.data))\r\n      .catch(err => console.error(err));\r\n\r\n    socket.on('receiveMessage', (data) => {\r\n      if (data.receiverId === receiverId) setMessages(prev => [...prev, data]);\r\n    });\r\n  }, [receiverId, token]);\r\n\r\n  const sendMessage = () => {\r\n    const data = { receiverId, message };\r\n    axios.post('http://localhost:5000/api/chats', data, { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(() => {\r\n        socket.emit('sendMessage', data);\r\n        setMessage('');\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Card className=\"mt-3\">\r\n      <Card.Body>\r\n        <h5>Chat with {receiverId ? 'Teacher' : 'Student'}</h5>\r\n        <ListGroup variant=\"flush\">\r\n          {messages.map((msg, idx) => (\r\n            <ListGroup.Item key={idx}>{msg.message}</ListGroup.Item>\r\n          ))}\r\n        </ListGroup>\r\n        <Form className=\"mt-3\">\r\n          <Form.Control\r\n            type=\"text\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            placeholder=\"Type a message...\"\r\n          />\r\n          <Button onClick={sendMessage} className=\"mt-2\">Send</Button>\r\n        </Form>\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}